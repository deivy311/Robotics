Robotics II
September 11, 2019
Exercise 1
Consider the 3R robot in Fig. 1, moving on a horizontal plane. The robot has identical links (each of
length L, uniformly distributed mass m, and inertia IL = mL2 /12 around the barycentral vertical axis)
and is commanded at the joint level by torques Ï„ (t) âˆˆ R3 . Neglect in the following any dissipative/friction
effects. With the system at t = 0 in a generic initial state (q(0), qÌ‡(0)) = (q 0 , qÌ‡ 0 ) with qÌ‡ 0 6= 0, we want to
control the robot so that its kinetic energy T = T (q, qÌ‡) in the closed-loop dynamics satisfies the following
desired target equation:
dT
= âˆ’Î³ T,
with Î³ > 0.
dt
Determine the expression of the control law Ï„ = Ï„ (q, qÌ‡) that realizes this behavior. For L = 0.2 [m],
m = 3 [kg], q 0 = (0, Ï€/2, Ï€/2) [rad], qÌ‡ 0 = (0, âˆ’Ï€, âˆ’Ï€) [rad/s] and Î³ = 1, compute the numerical value of
such a control torque at t = 0, i.e., Ï„ (0).
y0

L
m
q3

q2
m

L

L

m q1

x0

Figure 1: A 3R robot moving on a horizontal plane, and its coordinates q = (q1 , q2 , q3 ).
Exercise 2
The RP planar robot shown in Fig. 2 should execute a rest-to-rest motion task in minimum time under
torque/force bounds |Ï„i | â‰¤ Ï„max,i > 0, i = 1, 2, with its end-effector moving along a circular path of radius
R > d by an angle Î± from A to B. Determine the analytic expression of the minimum time T âˆ— in terms
of the task data and of the robot dynamic parameters. Draw the profile of the two components of the
time-optimal command Ï„ âˆ— (t), for t âˆˆ [0, T âˆ— ].

B

y0

q2
ð›¼

d
q1

ðœ$
ðœ#

A
x0

R

Figure 2: A RP robot moving its end-effector along a circular path on a horizontal plane.
Exercise 3
With reference to Fig. 3, a mass m1 is moving at constant speed v0 > 0 and collides at some time t = tc
with a mass m2 which is initially at rest. Assume a purely ideal situation: there is no dissipation due to
friction and the collision is perfectly elastic. Therefore, the total kinetic energy T and the total (scalar)
momentum P of the two masses will both remain constant over time. Determine the expressions of the
+
velocities v1 (t+
c ) and v2 (tc ) of the two masses after the collision. Describe what happens when m1 > m2 ,
m1 = m2 , or m1 < m2 , and in the limit cases when m2 â†’ 0 or m2 â†’ âˆž.
m1 v
0

m2
x

Figure 3: A mass m1 in motion collides with a second mass m2 initially at rest.
[open books, 180 minutes]

1

Solution
September 11, 2019
Exercise 1
The dynamic model of a frictionless robot in the absence of gravity is given by
M (q)qÌˆ + S(q, qÌ‡) qÌ‡ = Ï„ ,

(1)

where any factorization matrix S can be used for the (quadratic) Coriolis and centrifugal terms. From the
expression of the kinetic energy T = 12 qÌ‡ T M (q)qÌ‡, we obtain
dT
1
1
= qÌ‡ T M (q)qÌˆ + qÌ‡ T MÌ‡ (q)qÌ‡ = qÌ‡ T (Ï„ âˆ’ S(q, qÌ‡) qÌ‡) + qÌ‡ T MÌ‡ (q)qÌ‡ = qÌ‡ T Ï„ ,
(2)
dt
2
2


where we have used (1) and the principle of energy conservation (implying qÌ‡ T MÌ‡ (q) âˆ’ 2S(q, qÌ‡) qÌ‡ â‰¡ 0,
TÌ‡ =

âˆ€(q, qÌ‡)). In order to impose the desired behavior to the Kinetic energy, it follows immediately that
TÌ‡ = qÌ‡ T Ï„ = âˆ’Î³ T = âˆ’

Î³ T
qÌ‡ M (q)qÌ‡
2

=â‡’

Ï„ =âˆ’

Î³
M (q)qÌ‡.
2

(3)

The control law should apply a torque that is the (scaled) negative value of the current generalized momentum p = M (q)qÌ‡ of the robot.
To realize (3), one needs to derive only the inertia matrix M (q) for the 3R planar robot at hand. The
kinetic energy is given by
T =

3
X

Ti ,

1
1
2
m kv ci k2 + IL Ï‰z,i
,
2
2

Ti =

I=1

i = 1, 2, 3.

We compute first
1
T1 = m
2



L
qÌ‡1
2

2

1
+ IL qÌ‡12
2




1
L2 2
Â·Â·Â· = m
qÌ‡1 .
2
3

Then, from
L cos q1 + (L/2) cos(q1 + q2 )
L sin q1 + (L/2) sin(q1 + q2 )

pc2 =

!
â‡’

v c2 =

âˆ’L sin q1 qÌ‡1 âˆ’ (L/2) sin(q1 + q2 )(qÌ‡1 + qÌ‡2 )
L cos q1 qÌ‡1 + (L/2) cos(q1 + q2 )(qÌ‡1 + qÌ‡2 )

and
pc3 =
â‡’

v c3 =

we obtain
T2 =

L(cos q1 + cos(q1 + q2 )) + (L/2) cos(q1 + q2 + q3 )
L(sin q1 + sin(q1 + q2 )) + (L/2) sin(q1 + q2 + q3 )

!

!

âˆ’L(sin q1 qÌ‡1 + sin(q1 + q2 )(qÌ‡1 + qÌ‡2 )) âˆ’ (L/2) sin(q1 + q2 + q3 )(qÌ‡1 + qÌ‡2 + qÌ‡3 )
L(cos q1 qÌ‡1 + cos(q1 + q2 )(qÌ‡1 + qÌ‡2 )) + (L/2) cos(q1 + q2 + q3 )(qÌ‡1 + qÌ‡2 + qÌ‡3 )

!
,



1
L2
1
m L2 qÌ‡12 +
(qÌ‡1 + qÌ‡2 )2 + L2 cos q2 qÌ‡1 (qÌ‡1 + qÌ‡2 ) + IL (qÌ‡1 + qÌ‡2 )2
2
4
2

and
T3 =

1  2 2
L2
m L qÌ‡1 + L2 (qÌ‡1 + qÌ‡2 )2 + 2L2 cos q2 qÌ‡1 (qÌ‡1 + qÌ‡2 ) +
(qÌ‡1 + qÌ‡2 + qÌ‡3 )2
2
4 
1
+ L2 (cos(q2 + q3 )qÌ‡1 + cos q3 (qÌ‡1 + qÌ‡2 )) (qÌ‡1 + qÌ‡2 + qÌ‡3 ) + IL (qÌ‡1 + qÌ‡2 + qÌ‡3 )2 .
2

Therefore, using the compact notation for trigonometric functions and substituting for IL = mL2 /12, the
inertia matrix is
ï£«
ï£¶
4 + 3c2 + c3 + c23 35 + 32 c2 + c3 + 12 c23 31 + 12 (c3 + c23 )
ï£·
ï£¬
5
1
ï£·.
+ c3
+ 12 c3
M (q) = mL2 ï£¬
(4)
3
3
ï£­
ï£¸
1
symm
3
Finally, evaluating the control law at q 0 = (0, Ï€/2, Ï€/2) [rad] and qÌ‡ 0 = (0, âˆ’Ï€, âˆ’Ï€) [rad/s] and with the
data L = 0.2 [m], m = 3 [kg] (thus IL = 0.01 [kgÂ·m2 ]) and Î³ = 1, gives
ï£«
ï£¶ï£«
ï£¶
ï£«
ï£¶ ï£«
ï£¶
7
3
âˆ’ 16
0
0.12
0.1885
6
1
1 3 ï£¬ 7
Ï€
ï£·
ï£¬
ï£· ï£¬
ï£·
5
1 ï£·ï£¬
âˆ’Ï€ ï£¸ = ï£­ 0.24 ï£¸ = ï£­ 0.3770 ï£¸ [Nm]. (5)
Ï„ (0) = âˆ’ M (q 0 ) qÌ‡ 0 = âˆ’ Â·
ï£­ 6
3
3 ï£¸ï£­
2
2 25
2
1
âˆ’ 16 13
0.08
âˆ’Ï€
0.1257
3

2

Exercise 2
We start by deriving the dynamic model of the RP planar robot in Fig. 2. For the kinetic energy
1 T
qÌ‡ M (q)qÌ‡,
2

T = T1 + T2 =
since pc2 = (q2 âˆ’ d)
T1 =

cos q1

1
Ic1 qÌ‡12 ,
2

sin q1
T2 =

T

and v c2 = pÌ‡c2 , we have


1
1
1
1
Ic2 qÌ‡12 + m2 kv c2 k2 =
Ic2 + m2 (q2 âˆ’ d)2 qÌ‡12 + m2 qÌ‡22 ,
2
2
2
2

with an obvious interpretation of the dynamic parameters. The robot inertia matrix is then
!
Ic1 + Ic2 + m2 (q2 âˆ’ d)2
0
M (q) =
.
0
m2

(6)

From this, we compute the Coriolis/centrifugal terms using the matrices of Christoffel symbols
"
#
 
T 
âˆ‚M (q)
âˆ‚mi (q)
âˆ‚mi (q)
1
,
i = 1, 2.
âˆ’
C i (q) =
+
2
âˆ‚q
âˆ‚q
âˆ‚qi
We obtain
C 1 (q) =

0
m2 (q2 âˆ’ d)

and thus
c(q, qÌ‡) =

m2 (q2 âˆ’ d)
0
qÌ‡ T C 1 (q)qÌ‡
qÌ‡ T C 2 (q)qÌ‡

!
,

!
=

C 2 (q) =

âˆ’m2 (q2 âˆ’ d)
0

2m2 (q2 âˆ’ d) qÌ‡1 qÌ‡2
âˆ’m2 (q2 âˆ’ d) qÌ‡12

0
0

!

!
.

From (6) and (7), we write the (unconstrained) dynamic equations in their scalar form as

Ic1 + Ic2 + m2 (q2 âˆ’ d)2 ) qÌˆ1 + 2m2 (q2 âˆ’ d) qÌ‡1 qÌ‡2 = Ï„1 ,
m2 qÌˆ2 âˆ’ m2 (q2 âˆ’

d) qÌ‡12

,

= Ï„2 .

(7)

(8)
(9)

In order to execute the task, the second joint variable should remain constant at all times, namely q2 = R,
qÌ‡2 = qÌˆ2 = 0. Therefore, from (8) with q2 = R and qÌ‡2 = 0, the robot dynamics along the path can be
described by
I0 qÌˆ1 = Ï„1 ,
with I0 = Ic1 + Ic2 + m2 (R âˆ’ d)2 > 0,
(10)
whereas, from (9) used as inverse dynamics with q2 = R and qÌˆ2 = 0, the second motor should apply the
force
Ï„2 (t) = âˆ’m2 (R âˆ’ d) qÌ‡12 (t)
(11)
in order to have the end-effector remaining perfectly on the path. Equations (10â€“11) are the core of the
solution. Based on the linear dynamics (10), to perform the desired rest-to-rest motion task in minimum
time, the first motor should apply a bang-bang torque profile Ï„1 (t) (with maximum positive and negative
torque Â±Ï„max,1 , each applied for half of the motion interval). The total motion time should be sufficient
to complete the rotation âˆ†q1 = Î± > 0. Again from (10), this corresponds to using a maximum (absolute)
acceleration bound in the definition of the time-optimal motion of joint 1, i.e,
|qÌˆ1 | â‰¤ Amax,1 =

Ï„max,1
.
I0

(12)

While doing so, however, the velocity qÌ‡1 (t) of the first joint will increase linearly and, according to (11),
the force that the second motor needs to apply in order to keep the robot end-effector on the path will
increase quadratically. As a result, the second actuator may exceed its dynamic capabilities. Therefore,
the bound |Ï„2 | â‰¤ Ï„max,2 will impose also a bound Vmax,1 on the (absolute) velocity that the first joint can
reach. We have1
r
Ï„max,2
|Ï„2 | = m2 (R âˆ’ d) qÌ‡12 â‰¤ Ï„max,2
=â‡’
|qÌ‡1 | â‰¤ Vmax,1 =
.
(13)
m2 (R âˆ’ d)
Under the combined velocity/torque (viz. velocity/acceleration) bounds for the motion of joint 1, the minimum time solution will have in general a bang-coast-bang profile for the first torque (and its acceleration
as well). The motion time T âˆ— is computed then from known formulas.
1 Note

that R âˆ’ d > 0 by assumption, so the argument of the square root is positive.

3

2
If Î± > Vmax,1
/Amax,1 , a coast phase will exist. Then

Ts =

Vmax,1
Amax,1

=â‡’

(T âˆ— âˆ’ Ts )Vmax,1 = Î±

=â‡’

Tâˆ— =

Î±
Vmax,1
+
,
Vmax,1
Amax,1

(14)

where one should replace the definitions of bounds in (12) and (13). The (qualitative) plots of the resulting
torque/force vector Ï„ âˆ— (t) are reported in Fig. 4. The second joint force Ï„2âˆ— (t) follows from (11), with a
quadratic time profile where the velocity of the first joint is linear in time and a constant value where qÌ‡1
is constant. The other special cases (with pure bang-bang commands) are treated similarly.

ð‰ðŸ
ð‰ð’Žð’‚ð’™,ðŸ
T *-Ts

T*

t

ð‰ðŸ

Ts

T *-Ts

Ts

âˆ’ð‰ð’Žð’‚ð’™,ðŸ
ð’’Ì‡ ðŸ

T*

t

âˆ’ð‰ð’Žð’‚ð’™,ðŸ

ð‘½ð’Žð’‚ð’™,ðŸ
t
Ts

T *-Ts

T*

Figure 4: Optimal profiles of the torque Ï„1âˆ— , of the related velocity qÌ‡1âˆ— , and of the force Ï„2âˆ— for the requested
rest-to-rest minimum time motion of the RP robot in Fig. 2.
Exercise 3
This is a simple application of conservation principles of the total kinetic energy T and total momentum P
(along the direction x) for the system with the two masses m1 and m2 . In formulas,
T (t) =

1
1
m1 v12 (t) + m2 v22 (t) = constant,
2
2

P (t) = m1 v1 (t) + m2 v2 (t) = constant,

âˆ€t.

+
We apply these identities around the collision time t = tc , just before (t = tâˆ’
c ) and just after (t = tc ). Let

v1 = v1 (t+
c ),

v1 (tâˆ’
c ) = v0 > 0,

v2 = v2 (t+
c ),

v2 (tâˆ’
c ) = 0,

where v1 and v2 are the unknowns of our problem. Thus,
1
1
1
m1 v12 + m2 v22 = m1 v02
2
2
2

(15)

m1 v1 + m2 v2 = m1 v0 .

(16)

and
Equations (15) and (16) are rewritten respectively as
m1 (v12 âˆ’ v02 ) + m2 v22 = m1 (v1 âˆ’ v0 )(v1 + v0 ) + m2 v22 = 0

(17)

m1 (v1 âˆ’ v0 ) = âˆ’m2 v2 .

(18)

and
Substituting (18) in (17) and simplifying yields
v2 = v1 + v0 .

(19)

Plugging (19) back into (16) leads to
m1 v1 + m2 (v1 + v0 ) = m1 v0

=â‡’

v1 =

m1 âˆ’ m2
v0 .
m1 + m2

(20)

Finally, substituting v1 in (19) gives
v2 =

2m1
v0 .
m1 + m2

4

(21)

From (20â€“21), we conclude that:
ï£±
m2 â†’ 0
ï£´
ï£´
ï£´
ï£´
ï£´
m2 < m1
ï£´
ï£´
ï£²
m2 = m1
ï£´
ï£´
ï£´
ï£´
m2 > m1
ï£´
ï£´
ï£´
ï£³
m2 â†’ âˆž

=â‡’

v1 = v0 > 0,

v2 = 2v0 > 0,

=â‡’

v0 > v1 > 0,

v2 > v0 > 0,

=â‡’

v1 = 0,

v2 = v0 > 0,

=â‡’

âˆ’v0 < v1 < 0,

0 < v2 < v0 ,

=â‡’

v1 = âˆ’v0 < 0,

v2 = 0.

âˆ—âˆ—âˆ—âˆ—âˆ—

5

