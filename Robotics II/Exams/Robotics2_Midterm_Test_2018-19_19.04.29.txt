Robotics 2
Midterm test in classroom â€“ April 29, 2019
Exercise 1
Determine which of the following four 2Ã—2 matrices can be, under the stated conditions, the inertia
matrix associated to a real 2-dof robot with coordinates q1 and q2 , and which not (and why):


a1 + a2 q12 a2
MA =
,
a1 > a2 > 0;
a2
a2


a1
a3 cos(q2 âˆ’ q1 )
,
a1 > 0, a1 a2 > a23 > 0;
MB =
a3 cos(q2 âˆ’ q1 )
a2


a1 + 2a2 cos q2 a1 + a2 cos q2
MC =
,
a1 > 2a2 > 0;
a1 + a2 cos q2
a1


m1 + m2 âˆ’0.5m2
MD =
,
m1 > 0, m2 > 0.
âˆ’0.5m2
m2
For each case that is feasible, sketch the possible structure of the associated robot.
Exercise 2
Consider the 3-dof robot in Fig. 1, moving on a horizontal plane.
â€¢ Using the generalized coordinates q âˆˆ R3 and the dynamic parameters defined in Fig. 1,
determine the dynamic model of this robot using a Lagrangian formulation.
â€¢ Assume that the kinematic parameters are known. Provide a linear parameterization of the
dynamic model in the form
Y (q, qÌ‡, qÌˆ) a = u,
being u âˆˆ R3 the generalized force provided by the motors at the joints, such that the vector
of dynamic coefficients a âˆˆ Rp has the minimum possible dimension p.

y
m3,I3 âŠ•

q3

l2
dc2

âŠ• m2,I2

q2

q1

âŠ• m1,I1

x

Figure 1: A 3-dof planar PRP robot, with its associated coordinates q and dynamic data.

1

Exercise 3
The nR planar robot in Fig. 2 moves in the vertical plane under gravity. Each link has length li > 0
and has its center of mass on the kinematic axis at a distance dci R 0 from the driving joint. Using
the absolute coordinates q shown in Fig. 2, determine: i) the generic expressions of the components
of the gravity vector g(q) in the robot dynamic model; ii) all equilibrium configurations of the
robot (i.e., all q e âˆˆ Rn such that g(q e ) = 0); and, iii) the generic conditions on the center of mass
of each link such that the gravity vector vanishes identically (i.e., g(q) â‰¡ 0, âˆ€q).

y

dc1

q1

âŠ• m1

dc2

ğ’ˆğŸ
âŠ• m2

q2

dc,n-1
mn-1 âŠ•

x

qn-1
dcn
âŠ•

mn

qn
Figure 2: A nR planar robot, with its associated absolute coordinates q
Exercise 4
a) A 2-dof robot has the following inertia matrix:

a1
M (q) =
a2 sin q2

a2 sin q2
a3


.

(1)

Find two matrices S 1 and S 2 that factorize the centrifugal/Coriolis terms in c(q, qÌ‡) (i.e., with
S i (q, qÌ‡)qÌ‡ = c(q, qÌ‡), for i = 1, 2), such that MÌ‡ âˆ’ 2S 1 is skew-symmetric and MÌ‡ âˆ’ 2S 2 is not.
b) Consider a robot with n = 3 joints, inertia matrix M (q) > 0, and centrifugal/Coriolis terms
c(q, qÌ‡) = S(q, qÌ‡)qÌ‡, where the 3 Ã— 3 factorizing matrix S is obtained through the Christoffel
symbols. Show that one can always find another factorizing matrix S 0 6= S that satisfies
S 0 (q, qÌ‡)qÌ‡ = c(q, qÌ‡) and leads to a skew-symmetric matrix MÌ‡ âˆ’ 2S 0 .

2

Exercise 5
For a 2R planar robot with links of length l1 and l2 and inertia matrix


a1 + 2a2 cos q2 a3 + a2 cos q2
M (q) =
,
a3 + a2 cos q2
a3

(2)

the task requires the end-effector to be moved so as to change its distance Ï = Ï(q) from the base
according to a desired smooth timing law Ïd (t). Define the instantaneous joint velocity qÌ‡ that
realizes the task while minimizing the robot kinetic energy, and provide the symbolic expression
of all the terms needed for its evaluation. Compute then the numerical value of qÌ‡ with the data:
q1 = 0,

q2 =

Ï€
,
2

l1 = l2 = 1 [m],

a1 = 10,

a2 = 2.5,

a3 =

5
,
3

ÏÌ‡d = 0.5 [m/s].

(3)

Exercise 6
A 3R planar robot with links
 of unitary length is at rest in the Denavit-Hartenberg configuration q = Ï€/6 Ï€/6 Ï€/6 [rad] and should instantaneously accelerate its end effector at
pÌˆ = 4 2 [m/s2 ]. Find, if possible, a joint acceleration qÌˆ âˆˆ R3 with the least possible norm
that perfectly realizes the task under the bounds
|qÌˆ1 | â‰¤ 2.8 [rad/s2 ],

|qÌˆ2 | â‰¤ 3.6 [rad/s2 ],

|qÌˆ3 | â‰¤ 4 [rad/s2 ].

(4)

[210 minutes (3.5 hours); open books, computer, but no internet and no smartphone]

3

Solution
April 29, 2019
Exercise 1
A) Matrix M A is not a robot inertia matrix because it is a function of the first coordinate q1 at
the robot base. This can never be the case: the definition of q1 is in fact arbitrary, as is the
choice of a base frame for the robot. The inertia matrix is instead an intrinsic property of the
manipulator structure.
B) M B is the inertia matrix of a 2-dof robot with a parallelogram structure (see left of Fig. 3,
2
2
which is taken from the lecture slides), in which we have a1 = Ic1,zz + m1 lc1
+ Ic3,zz + m3 lc3
+
2
2
2
2
m4 l1 , a2 = Ic2,zz + m2 lc2 + Ic4,zz + m4 lc3 + m3 l2 , and a3 = m3 l2 lc3 âˆ’ m4 l1 lc2 . Absolute
coordinates have been used therein. The dependence of M B only on the difference q2 âˆ’ q1
confirms that a robot inertia matrix can only be a function of the internal configuration
(thus, it does not depend on the choice of the base reference frame). This can be seen also
analytically, by applying the linear change of coordinates
!
!
!
p1
1 0
q1
p=
=
= J q.
p2
âˆ’1 1
q2
In the new coordinates p âˆˆ R2 , the transformed inertia matrix becomes
f B = J âˆ’T M B J âˆ’1 =
M

a1 + 2a3 cos p2

a2 + a3 cos p2

a2 + a3 cos p2

a3

!
,

which is a function of the second coordinate p2 only.
C) Matrix M C resembles the inertia matrix of the usual 2R planar robot, but is not. A dynamic
coefficient a3 > 0 is missing in M (1, 1), and this destroys the positive definiteness for every q,
as it should be instead for an inertia matrix. In fact, the determinant
det M C = âˆ’a22 cos2 q2
is never positive.
D) M D is the inertia matrix of a 2P robot, with the second prismatic joint having a twist angle
of Î± = Â±120â—¦ w.r.t. the first prismatic joint. The first link has mass m1 and the second link
has mass m2 . A sketch of this robot is shown on the right of Fig. 3.

y

q1

m2 âŠ•
âŠ•

m1

q2

a = 120o

x

Figure 3: [left] 2-dof parallelogram robot; [right] PP robot with second axis twisted by Î± = 120â—¦ .

4

Exercise 2
Following a Lagrangian approach, we derive the kinetic energy of the robot, T (q, qÌ‡) = T1 + T2 + T3 .
Using KoÌˆnig theorem1 ,
1
1
2
Ti = mi kv ci k + Ï‰ Ti I i Ï‰ i ,
2
2
and performing computations for each link, one has
T1 =

1
2

m1 qÌ‡12 ,


dc2 cos q2
q1 + k1 + dc2 sin q2

pc2 =
T2 =

1
2




â‡’

v c2 = pÌ‡c2 =


m2 qÌ‡12 + d2c2 qÌ‡22 + 2 dc2 cos q2 qÌ‡1 qÌ‡2 +

1
2

âˆ’dc2 sin q2 qÌ‡2
qÌ‡1 + dc2 cos q2 qÌ‡2


,

I2 qÌ‡22 ,

where k1 is the distance from the center of mass of link 1 to the axis of joint 2 (an irrelevant
constant), and




l2 cos q2 âˆ’ q3 sin q2
âˆ’ (l2 sin q2 + q3 cos q2 ) qÌ‡2 âˆ’ sin q2 qÌ‡3
pc3 =
â‡’ v c3 = pÌ‡c3 =
,
q1 + k1 + l2 sin q2 + q3 cos q2
qÌ‡1 + (l2 cos q2 âˆ’ q3 sin q2 ) qÌ‡2 + cos q2 qÌ‡3


T3 = 12 m3 qÌ‡12 + l22 + q32 qÌ‡22 + qÌ‡32 + 2 (l2 cos q2 âˆ’ q3 sin q2 ) qÌ‡1 qÌ‡2 + 2 cos q2 qÌ‡1 qÌ‡3 + 2l2 qÌ‡2 qÌ‡3 + 12 I3 qÌ‡22 .
Thus
ï£«
T =

1 T
1
ï£¬
qÌ‡ M (q)qÌ‡ = qÌ‡ T ï£­
2
2

m1 + m2 + m3

m3 (l2 cos q2 âˆ’ q3 sin q2 ) + m2 dc2 cos q2

I2 + m2 d2c2 + I3 + m3 l22 + q32

symm

m3 cos q2
m3 l2

ï£¶
ï£·
ï£¸ qÌ‡.

m3

Introduce now a (minimal) parametrization of the robot inertia matrix, collecting the 4 dynamic
coefficients that appear in M (q) and defined as follows2 :
ï£«
ï£¶ ï£«
ï£¶
m1 + m2 + m3
a1
ï£¬ a ï£· ï£¬ I + m d2 + I ï£·
2 c2
3 ï£·
ï£¬ 2ï£· ï£¬ 2
a=ï£¬
(5)
ï£·=ï£¬
ï£·.
ï£­ a3 ï£¸ ï£­
m3
ï£¸
a4
m2 dc2
As a result, the inertia matrix M (q) takes the linearly parametrized form
ï£«
a1
a3 (l2 cos q2 âˆ’ q3 sin q2 ) + a4 cos q2

ï£¬
a2 + a3 l22 + q32
M (q) = ï£­ a3 (l2 cos q2 âˆ’ q3 sin q2 ) + a4 cos q2
a3 cos q2
a3 l2

ï£¶
a3 cos q2
ï£·
a3 l2 ï£¸ .
a3
(6)

The components of the Coriolis and centrifugal vector are computed from (6) using the Christoffelâ€™s
symbols
!

T
âˆ‚M i (q)
âˆ‚M (q)
1 âˆ‚M i (q)
T
+
âˆ’
,
ci (q, qÌ‡) = qÌ‡ C i (q)qÌ‡,
C i (q) =
2
âˆ‚q
âˆ‚q
âˆ‚q i
1 Being

the motion planar, we restrict all linear vectors (e.g., pc2 or v c2 ) to be two-dimensional (living in the
plane (x, y)), while angular velocities are just scalars (the component of Ï‰ i along the z-axis normal to the plane).
2 As indicated in the text, we consider the kinematic parameter l to be known.
2

5

being M i the ith column of the inertia matrix M (q). We have
ï£«ï£«
ï£¶
0
0
0
1 ï£¬ï£¬
ï£·
C 1 (q) = ï£­ï£­ 0 âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2 âˆ’a3 sin q2 ï£¸
2
0
âˆ’a3 sin q2
0
ï£¶
ï£«
ï£¶
0
0
0
ï£·
ï£¬
ï£·
+ ï£­ 0 âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2 âˆ’a3 sin q2 ï£¸ âˆ’ 0ï£¸
0
âˆ’a3 sin q2
0
ï£«
ï£¶
0
0
0
ï£¬
ï£·
= ï£­ 0 âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2 âˆ’a3 sin q2 ï£¸
0
âˆ’a3 sin q2
0
â‡’

c1 (q, qÌ‡) = âˆ’ (a3 (l2 sin q3 + q3 cos q2 ) + a4 sin q2 ) qÌ‡22 âˆ’ 2 a3 sin q2 qÌ‡2 qÌ‡3 .

Similarly,
ï£¶
0 âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2 âˆ’a3 sin q2
1 ï£¬ï£¬
ï£·
0
2a3 q3 ï£¸
C 2 (q) = ï£­ï£­ 0
2
0
0
0
ï£¶
ï£«
0
0
0
ï£·
ï£¬
0
0ï£¸
+ ï£­ âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2
âˆ’a3 sin q2
2a3 q3 0
ï£«
0
âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2
ï£¬
0
âˆ’ ï£­ âˆ’a3 (l2 sin q2 + q3 cos q2 ) âˆ’ a4 sin q2
âˆ’a3 sin q2
0
ï£¶
ï£«
0
0
0
ï£·
ï£¬
0
a3 q3 ï£¸
â‡’
c2 (q, qÌ‡) = 2 a3 q3 qÌ‡2 qÌ‡3
=ï£­0
0 a3 q3
0
ï£«ï£«

ï£¶ï£¶
âˆ’a3 sin q2
ï£·ï£·
0
ï£¸ï£¸
0

and
ï£«ï£«

0 âˆ’a3 sin q2
1 ï£¬ï£¬
0
C 3 (q) = ï£­ï£­ 0
2
0
0
ï£«
ï£¶
0
0
0
ï£¬
ï£·
= ï£­ 0 âˆ’a3 q3 0 ï£¸
0
0
0

ï£¶ ï£«
0
0
ï£· ï£¬
0 ï£¸ + ï£­ âˆ’a3 sin q2
0
0

â‡’

ï£¶ ï£«
0 0
0
ï£· ï£¬
0 0 ï£¸ âˆ’ ï£­ âˆ’a3 sin q2
0 0
0

âˆ’a3 sin q2
2a3 q3
0

ï£¶ï£¶
0
ï£·ï£·
0 ï£¸ï£¸
0

c3 (q, qÌ‡) = âˆ’a3 q3 qÌ‡22 .

Summarizing, we have the final expression:
ï£¶
ï£«
âˆ’ (a3 (l2 sin q2 + q3 cos q2 ) + a4 sin q2 ) qÌ‡22 âˆ’ 2 a3 sin q2 qÌ‡2 qÌ‡3
ï£·
ï£¬
2 a3 q3 qÌ‡2 qÌ‡3
c(q, qÌ‡) = ï£­
ï£¸.
âˆ’a3 q3 qÌ‡22

6

(7)

Using the inertia matrix in (6) and the quadratic velocity vector in (7), the complete robot dynamic
model can be expressed in the linearly parametrized form
M (q)qÌˆ + c(q, qÌ‡) = Y (q, qÌ‡.qÌˆ) a = u,
where a âˆˆ R4 is defined in (5) and the 3 Ã— 4 matrix Y is given by
ï£«
ï£¶
qÌˆ1
0
cos q2 qÌˆ2 âˆ’ sin q2 qÌ‡22
ï£·
ï£¬
qÌˆ2
cos q2 qÌˆ1
Y =ï£­ 0
Y3
ï£¸,
0
0
0

(8)

being the third column
ï£«
ï£¶
(l2 cos q2 âˆ’ q3 sin q2 ) qÌˆ2 + cos q2 qÌˆ3 âˆ’ (l2 sin q2 + q3 cos q2 ) qÌ‡22 âˆ’ 2 sin q2 qÌ‡2 qÌ‡3

ï£¬
ï£·
(l2 cos q2 âˆ’ q3 sin q2 ) qÌˆ1 + l22 + q32 qÌˆ2 + l2 qÌˆ3 + 2q3 qÌ‡2 qÌ‡3
Y3=ï£­
ï£¸.
2
cos q2 qÌˆ1 + l2 qÌˆ2 + qÌˆ3 âˆ’ q3 qÌ‡2
Exercise 3
The use of absolute coordinates makes it simpler to derive the solution for the gravity term in the
general case of a planar (serial) robot arm with n revolute joints. Since
ï£«
ï£¶
g0
g0 = ï£­ 0 ï£¸ ,
g0 = 9.81 [m/s2 ],
0
the potential energy due to gravity of link j of the robot, for j = 1, . . . , n, is
!
jâˆ’1
X
T
Uj (q) = âˆ’mj g 0 r 0,cj = âˆ’mj g0
lk cos qk + dcj cos qj .

(9)

k=1

The total potential energy due to gravity is then
U (q) =

n
X

Uj (q) = âˆ’g0

j=1

n
X

jâˆ’1
X

mj

j=1

= âˆ’g0

n
X

!
lk cos qk + dcj cos qj

k=1

ï£«ï£«

n
X

ï£­ï£­
i=1

ï£¶

ï£¶

mj ï£¸ li + mi dci ï£¸ cos qi .

j=i+1

For instance, setting n = 5, we have from eq. (9)
U1 = âˆ’m1 g0 dc1 cos q1
U2 = âˆ’m2 g0 (l1 cos q1 + dc2 cos q2 )
U3 = âˆ’m3 g0 (l1 cos q1 + l2 cos q2 + dc3 cos q3 )
U4 = âˆ’m4 g0 (l1 cos q1 + l2 cos q2 + l3 cos q3 + dc4 cos q4 )
U5 = âˆ’m5 g0 (l1 cos q1 + l2 cos q2 + l3 cos q3 + l4 cos q4 + dc5 cos q5 )
U (q) =

5
X

Uj ,

j=1

7

(10)

where the structure of the last expression of U (q) in eq. (10) can be easily recognized.
According to (10), the components gi (q) of the gravity vector g(q) âˆˆ Rn are
ï£«ï£«
ï£¶
ï£¶
n
X
âˆ‚U (q)
gi (q) =
= g0 ï£­ï£­
mj ï£¸ li + mi dci ï£¸ sin qi ,
i = 1, . . . , n.
âˆ‚qi
j=i+1

(11)

The unforced equilibrium configurations of the robot (independently of the values of kinematic and
dynamic parameters) are then characterized by
qi = qe,i = {0, Ï€},

âˆ€i âˆˆ {1, . . . , n}

â‡’

g(q e ) = 0.

All these configurations correspond to the robot links being stretched or folded along the vertical
axis x. The total number of such equilibria is Ne = 2n .
In order to have a robot always balanced with respect to gravity, i.e., g(q) â‰¡ 0, the following
conditions should hold from (11):
ï£«
ï£¶
n
X
ï£­
ï£«
ï£¶
mj ï£¸ li
n
X
j=i+1
ï£­
< 0,
i = 1, . . . , n âˆ’ 1,
mj ï£¸ li + mi dci = 0
â‡â‡’
dci = âˆ’
mi
j=i+1
and
dcn = 0.
In words, the mass and location of the center of mass of each link should balance (at the associated
joint axis) the total mass of the following links in the chain, as if it were concentrated at the end
of the link. Any configuration q âˆˆ Rn would then be an equilibrium.
Exercise 4
a) From the inertia matrix (1) of this robot, which is a PR planar arm already treated in the
lecture slides, the matrices of Christoffel symbols and the velocity vector (containing only a
centrifugal term in the present case) are computed as




0
0
a2 cos q2 qÌ‡22
C 1 (q) =
,
C 2 (q) = 0
â‡’
c(q, qÌ‡) =
(12)
0 a2 cos q2
0
with a2 = âˆ’m2 dc2 . The time derivative of the inertia matrix (1) is


0
a2 cos q2 qÌ‡2
MÌ‡ =
.
a2 cos q2 qÌ‡2
0
A factorization S 1 qÌ‡ of vector c in (12) leading to the skew symmetry of MÌ‡ âˆ’ 2S 1 is found by
using the matrices of Christoffel symbols (or just by trivial inspection). It is easy to check that
the matrix
! 

qÌ‡ T C 1 (q)
0 a2 cos q2 qÌ‡2
S 1 (q, qÌ‡) =
=
(13)
0
0
qÌ‡ T C 2 (q)
provides

MÌ‡ âˆ’ 2S 1 =

0
a2 cos q2 qÌ‡2
8

âˆ’a2 cos q2 qÌ‡2
0


,

which satisfies the desired skew-symmetric property. On the other hand, a different feasible
factorization that uses the matrix


qÌ‡2 a2 cos q2 qÌ‡2 âˆ’ qÌ‡1
S 2 (q, qÌ‡) =
0
0
(14)


qÌ‡2 âˆ’qÌ‡1
= S 1 (q, qÌ‡) +
= S 1 (q, qÌ‡) + S 0 (qÌ‡), with S 0 (qÌ‡)qÌ‡ = 0,
0
0
satisfies S 2 qÌ‡ = c and provides

MÌ‡ âˆ’ 2S 2 =

âˆ’2qÌ‡2
a2 sin q2 qÌ‡2

âˆ’a2 sin q2 qÌ‡2 + 2qÌ‡1
0


,

which is clearly not a skew-symmetric matrix.
b) We use here the simple fact that, when qÌ‡ âˆˆ R3 ,
ï£«
0
ï£¬
qÌ‡ Ã— qÌ‡ = S 0 (qÌ‡)qÌ‡ = ï£­ qÌ‡3
âˆ’qÌ‡2

one has
âˆ’qÌ‡3
0
qÌ‡1

ï£¶
ï£¶ï£«
qÌ‡1
qÌ‡2
ï£·
ï£·ï£¬
âˆ’qÌ‡1 ï£¸ ï£­ qÌ‡2 ï£¸ = 0,
qÌ‡3
0

where S 0 is by construction a skew-symmetric matrix. If a factorization c(q, qÌ‡) = S(q, qÌ‡)qÌ‡
leading to a skew symmetric matrix MÌ‡ âˆ’ 2S is available, then matrix S 0 = S + S 0 6= S will
be another feasible factorization, since
S 0 (q, qÌ‡)qÌ‡ = (S(q, qÌ‡) + S 0 (qÌ‡)) qÌ‡ = S(q, qÌ‡)qÌ‡ = c(q, qÌ‡).
Moreover, the matrix


MÌ‡ âˆ’ 2S 0 = MÌ‡ âˆ’ 2S + (âˆ’2S 0 )
is also skew symmetric, being the sum of two skew-symmetric matrices. Indeed, matrix S 0 is
not obtained using the Christoffel symbols only, and it is also clear that an infinite number of
such feasible factorizations exists, all leading to the skew-symmetric property.
This construction can be easily generalized to the case of arbitrary n â‰¥ 3, by considering for
instance a velocity vector qÌ‡ 0 âˆˆ Rn with all zero components but three consecutive ones, and
an associated n Ã— n skew-symmetric matrix S 0 (qÌ‡ 0 ) with a single non-zero 3 Ã— 3 block at the
proper place on the diagonal, constructed as in the three-dimensional case.
Exercise 5
The direct kinematics of the 2R planar robot is


l1 cos q1 + l2 cos(q1 + q2 )
p=
.
l1 sin q1 + l2 sin(q1 + q2 )
Therefore, the distance of the robot end effector from the base is
q
Ï(q) = kpk = l12 + l22 + 2 l1 l2 cos q2 .
The task Jacobian is then a 1 Ã— 2 matrix
âˆ‚Ï(q)
J (q) =
=
âˆ‚q


0

9

l1 l2 sin q2
âˆ’
kpk


,

(15)

which, for l1 6= l2 , is full rank except when q2 = {0, Ï€}. For l1 = l2 , the rank of J drops only at
q2 = 0, whereas the element J12 (q2 ) has a discontinuity at q2 = Â±Ï€ (the two limits for q2 â†’ +Ï€
and q2 â†’ âˆ’Ï€ are non-zero and different).
A joint velocity qÌ‡ that realizes the task while minimizing the robot kinetic energy uses the inertiaweighted pseudoinverse of the task Jacobian,

âˆ’1
âˆ’1
qÌ‡ = qÌ‡ W P s = J #
(q) J T (q) J (q) M âˆ’1 (q) J T (q)
ÏÌ‡d ,
(16)
M (q) ÏÌ‡d = M
where the last equality holds provided that J is full rank. In this case, using in (16) the symbolic
expressions (2) and (15), we obtain
!âˆ’1


âˆ’(a3 + a2 cos q2 )
(l1 l2 sin q2 )2 (a1 + 2a2 cos q2 )
l1 l2 sin q2
Â·
ÏÌ‡d ,
qÌ‡ W P s = âˆ’
2
kpk Â· det M (q)
a1 + 2a2 cos q2
kpk Â· det M (q)
where det M (q) = a3 (a1 âˆ’ a3 ) âˆ’ a22 cos2 q2 > 0. Simplifying, this yields
ï£¶
ï£«
a3 + a2 cos q2
kpk ï£¬ a + 2a cos q ï£·
2
2 ï£¸ ÏÌ‡d .
qÌ‡ W P s =
ï£­ 1
l1 l2 sin q2
âˆ’1
Substituting in (17) the numerical data of the problem, we obtain finally


0.1179
qÌ‡ W P s =
.
âˆ’0.7071

(17)

(18)

An alternative (and simpler) solution would have been to seek for the minimum norm joint velocity,
i.e., using the pseudoinverse of J ,
ï£«
ï£¶
0
ï£¸ ÏÌ‡d ,
qÌ‡ P s = J # (q) ÏÌ‡d = ï£­
kpk
âˆ’
l1 l2 sin q2
leading to the numerical value

qÌ‡ P s =

0
âˆ’0.7071


.

(19)

Indeed, a different target is reached by the two solutions qÌ‡ W P s in (18) and qÌ‡ P s in (19) in terms of
the objective function that is being minimized. We have in fact
1 T
1 T
1
qÌ‡ W P s M qÌ‡ W P s = min
qÌ‡ M qÌ‡ = 0.3472 < 0.4167 = qÌ‡ TP s M qÌ‡ P s
qÌ‡: J qÌ‡ = ÏÌ‡d 2
2
2
and, viceversa,
1 T
1 T
1
qÌ‡ P s qÌ‡ P s = min
qÌ‡ qÌ‡ = 0.25 < 0.2569 = qÌ‡ TW P s qÌ‡ W P s .
qÌ‡: J qÌ‡ = ÏÌ‡d 2
2
2
Exercise 6
Using Denavit-Hartenberg coordinates, the Jacobian of a 3R planar robot with unitary links is


âˆ’ (s1 + s12 + s123 ) âˆ’ (s12 + s123 ) âˆ’s123
J (q) =
,
c1 + c12 + c123
c12 + c123
c123
10

with the usual compact notation. At the configuration q = Ï€/6 Ï€/6 Ï€/6

J=

âˆ’2.3660
1.3660

âˆ’1.8660
0.5

âˆ’1
0


=

J1

J2

J3



T

[rad], it becomes

.

(20)

Note that rank J = 2. Moreover, its three 2 Ã— 2 minors are all different from zero in this case.
Since the robot is at rest (qÌ‡ = 0), the second-order differential mapping to be inverted is simply
 
4
pÌˆ = J qÌˆ,
for pÌˆ =
[m/s2 ].
2
In order to get a solution that is feasible with respect to the hard bounds (4) and has the least
possible norm, we can apply the SNS (Saturation in the Null Space) method on joint accelerations3 .
To start with, we look for a solution with minimum acceleration norm,
ï£«
ï£¶
ï£«
ï£¶
0.1715
0.9832
 
2.6524
ï£¬
ï£· 4
ï£¬
ï£·
qÌˆ P S = J # pÌˆ = ï£­ âˆ’0.4686 âˆ’0.6861 ï£¸
= ï£­ âˆ’3.2466 ï£¸ .
2
âˆ’0.5314 âˆ’1.0460
âˆ’4.2175

(21)

The third joint acceleration violates its maximum bound, qÌˆP S,3 = âˆ’4.2175 < âˆ’4 = âˆ’A3 , so this
solution is not feasible. Next, we search for a feasible solution by saturating the (single) overdriven
joint, i.e., setting qÌˆ3 = âˆ’A3 = âˆ’4 [rad/s2 ] (this is step 1 of the SNS algorithm). The original task
is modified by removing the contribution of the saturated acceleration of the third joint (and by
discarding the associated column of J ). We rewrite this as
  

  


âˆ’2.3660 âˆ’1.8660
4
âˆ’1
0
qÌˆ1
pÌˆ1 = pÌˆâˆ’J 3 (âˆ’A3 ) =
âˆ’
Â·(âˆ’4) =
=
= J âˆ’3 qÌˆ âˆ’3 ,
2
0
2
qÌˆ2
1.3660
0.5
where J âˆ’i is the matrix obtained by deleting the ith column from the Jacobian in (20) and,
accordingly, qÌˆ âˆ’i is the vector of joint accelerations without the ith component. For the modified
task, we compute the contribution of the two active joints by inverting matrix J âˆ’3 , which is now
square and nonsingular. Thus, we obtain the unique solution

  

0.3660 1.3660
0
2.7321
âˆ’1
qÌˆ âˆ’3 = (J âˆ’3 ) pÌˆ1 =
=
[rad/s2 ].
2
âˆ’3.4641
âˆ’1
âˆ’1.7321
All bounds are now satisfied and the resulting joint acceleration, with the third component fixed
at qÌˆ3 = âˆ’4 = âˆ’A3 , is feasible. Thus, there is no need to scale down the original task acceleration
pÌˆ. Recomposing the complete joint acceleration vector, we have the solution
ï£«
ï£¶
2.7321
qÌˆ âˆ— = ï£­ âˆ’3.4641 ï£¸ [rad/s2 ],
with J qÌˆ âˆ— = pÌˆ and kqÌˆ âˆ— k = 5.9552.
(22)
âˆ’4
This solution is not unique, but the underlying SNS method which has been followed guarantees
that a feasible solution of minimum norm has been obtained.
For instance, another feasible solution can be obtained by setting the acceleration of the second
joint to its lower bound (qÌˆ2 = âˆ’A2 = âˆ’3.6 [rad/s2 ]), which is the saturation level that is closer
3 The

solution is quite intuitive in this case and could also be obtained without any knowledge of the SNS method.

11

to the value of this component in the unconstrained minimum norm solution (21), and adjusting
accordingly the other two joint accelerations. Since


 

0
0.7321
âˆ’2.7177
2.7818
âˆ’1
qÌˆ âˆ’2 = (J âˆ’2 ) (pÌˆ âˆ’ J 2 Â· (âˆ’A2 )) =
=
[rad/s2 ],
3.8
âˆ’3.8641
âˆ’1 âˆ’1.7321
the complete solution qÌˆ  is feasible but has slightly larger norm than the SNS solution qÌˆ âˆ— in (22):
ï£«
ï£¶
2.7818
qÌˆ  = ï£­ âˆ’3.6 ï£¸ [rad/s],
with J qÌˆ  = pÌˆ and kqÌ‡  k = 5.9691.
âˆ’3.8641
Finally, it is easy to see that a solution having the acceleration of the first joint saturated at its
T
upper bound, qÌˆ = 2.8 âˆ’3.6497 âˆ’3.8144 , would instead be unfeasible (the second component
is out of bounds).
âˆ—âˆ—âˆ—âˆ—âˆ—

12

