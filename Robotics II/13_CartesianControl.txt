Robotics 2

Control in the Cartesian Space
Prof. Alessandro De Luca

Regulation of robot Cartesian pose
n

â€œPD +â€ type control for regulation problems
n

n

robot
n
n

n

proportional to the Cartesian pose error, with a derivative term
(on velocity) + cancellation/compensation of gravity in joint space

ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘† ğ‘, ğ‘Ì‡ ğ‘Ì‡ + ğ‘” ğ‘ = ğ‘¢
kinematics
ğ‘ = ğ‘“ ğ‘ âŸ¶ ğ‘Ì‡ = ğ½ ğ‘ ğ‘Ì‡
dynamics

dimension of spaces
joint = ğ‘›
Cartesian = ğ‘š

goal: asymptotic stabilization of the end-effector pose
ğ‘ = ğ‘5 , ğ‘Ì‡ = 0 âŸ¶ ğ‘Ì‡5 = 0
Note: if ğ‘› = ğ‘š, then ğ‘Ì‡ = 0 â‡” ğ‘Ì‡ = 0 up to singularities
n

Robotics 2

if ğ‘› > ğ‘š, then the goal is not uniquely associated
to a complete robot state: ğ‘› âˆ’ ğ‘š joint
coordinates are missingâ€¦
2

A Cartesian regulation law
(*)

ğ‘¢ = ğ½9 ğ‘ ğ¾7 ğ‘5 âˆ’ ğ‘ âˆ’ ğ¾8 ğ‘Ì‡ + ğ‘”(ğ‘)

ğ¾7 , ğ¾8 > 0
(symmetric)

Theorem
under the control law (*), the robot state will converge asymptotically
to the set

ğ´ = {ğ‘Ì‡ = 0, ğ‘: ğ¾7 ğ‘5 âˆ’ ğ‘“ ğ‘ âˆˆ ğ‘ ğ½9 ğ‘ )
âŠ‡ {ğ‘Ì‡ = 0, ğ‘: ğ‘“ ğ‘ = ğ‘5 }

Proof
define ğ‘’7 = ğ‘5 âˆ’ ğ‘ (Cartesian error) and the associated
Lyapunov-like candidate function
ğ‘‰ = GH ğ‘Ì‡ 9 ğ‘€ ğ‘ ğ‘Ì‡ + GH ğ‘’I9 ğ¾7 ğ‘’7
Ì‡ âˆˆ {ğ‘Ì‡ = 0, ğ‘: ğ‘“ ğ‘ = ğ‘5 } âŠ† ğ´
with ğ‘‰ = 0 âŸº (ğ‘, ğ‘)
Robotics 2

ğ´
ğ‘‰=0

3

Proof

(cont)

G 9
G 9
differentiating ğ‘‰ = H ğ‘Ì‡ ğ‘€ ğ‘ ğ‘Ì‡ + H ğ‘’I ğ¾7 ğ‘’7 â‰¥ 0

ğ‘‰Ì‡ = ğ‘Ì‡ 9 ğ‘€ğ‘Ìˆ + GH ğ‘€Ì‡ ğ‘Ì‡ âˆ’ ğ‘’I9 ğ¾7 ğ‘Ì‡
= ğ‘Ì‡ 9 ğ‘¢ âˆ’ ğ‘†ğ‘Ì‡ âˆ’ ğ‘” + M ğ‘€Ì‡ ğ‘Ì‡ âˆ’ğ‘’I9 ğ¾7 ğ‘Ì‡
N

= ğ‘Ì‡ 9 ğ½9 ğ¾7 ğ‘’7 âˆ’ ğ¾8 ğ‘Ì‡ + ğ‘” âˆ’ ğ‘” âˆ’ ğ‘’I9 ğ¾7 ğ½ğ‘Ì‡
= âˆ’ğ‘Ì‡ 9 ğ¾8 ğ‘Ì‡ â‰¤ 0
with ğ‘‰Ì‡ = 0 âŸº ğ‘Ì‡ = 0

in this situation, the closed-loop equations become

ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘” ğ‘ = ğ½9 ğ‘ ğ¾7 ğ‘’7 + ğ‘”(ğ‘)

ğ‘Ìˆ = ğ‘€KG(ğ‘)ğ½9 ğ‘ ğ¾7 ğ‘’7

ğ‘Ìˆ = 0 âŸº ğ¾7 ğ‘’7 âˆˆ ğ‘ ğ½9 (ğ‘)
by applying LaSalle theorem, the thesis follows

Robotics 2

4

Corollary
for a given initial state (ğ‘ 0 , ğ‘(0)
Ì‡ ), if the robot does not
encounter any singularity of ğ½ğ‘‡(ğ‘) (configurations where
ğœŒ ğ½9 < ğ‘š â‰¤ ğ‘›) during its motion, then there is asymptotic
stabilization to one single state (ğ‘š = ğ‘›) or to a set of
states (ğ‘š < ğ‘›) such that

ğ‘’7 = 0, ğ‘Ì‡ = 0
Note: singular configurations ğ‘ of ğ½ğ‘‡(ğ‘) coincide with those of ğ½(ğ‘)

Robotics 2

5

A possible variant for regulation
â€œall Cartesianâ€ PD control + gravity cancellation in joint space
(**)

ğ‘¢ = ğ½9 ğ‘ ğ¾7 ğ‘5 âˆ’ ğ‘ âˆ’ ğ¾8 ğ‘Ì‡ + ğ‘”(ğ‘)

ğ¾7 , ğ¾8 > 0
(symmetric)

mechanical
interpretation

(*)

ğ‘ğ‘‘

(**)

ğ‘ğ‘‘

ğ½ğ‘‡ transforms the â€œvirtualâ€ elastic, for (*), or visco-elastic, for (**),
force/torque acting on the end-effector into control torques at the joints
Robotics 2

6

Feedback linearization in Cartesian space
robot

ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ = ğ‘¢

output

ğ‘¦ = ğ‘, ğ‘ = ğ‘“(ğ‘)

Cartesian
position/orientation

assume: ğ‘€ = ğ‘

algorithm differentiate the output(s) as many times as needed
up to the appearance of (at least one of) the input torque(s),
then verify if it is possible to solve for the input = â€œinversionâ€
uniform
â€œrelative degreeâ€™â€™

ğœŒ=2

for all outputs

ğ‘¦=ğ‘“ ğ‘
from the dynamic model
ğ‘¦Ì‡ = ğ½ ğ‘ ğ‘Ì‡
ğ‘¦Ìˆ = ğ½ ğ‘ ğ‘Ìˆ + ğ½Ì‡ ğ‘ ğ‘Ì‡
= ğ½ ğ‘ ğ‘€KG ğ‘ ğ‘¢ âˆ’ ğ½ ğ‘ ğ‘€KG ğ‘ ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ + ğ½Ì‡ ğ‘ ğ‘Ì‡

Theorem
for a non-redundant robot, it is possible to exactly linearize and
decouple the dynamic behavior at the Cartesian level if and only if

det ğ½(ğ‘) â‰  0
Robotics 2

7

Feedback linearization in Cartesian space
(in the right coordinates!)

control law

ğ‘¢ = ğ‘€ ğ‘ ğ½KG ğ‘ ğ‘ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ âˆ’ ğ‘€ ğ‘ ğ½KG ğ‘ ğ½Ì‡ ğ‘ ğ‘Ì‡
= ğ›½ ğ‘ ğ‘ + ğ›¼(ğ‘, ğ‘)
Ì‡

ğ‘¦Ìˆ = ğ‘Ìˆ = ğ½ ğ‘ ğ‘€KG ğ‘ ğ‘¢ âˆ’ ğ½ ğ‘ ğ‘€KG ğ‘ ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ + ğ½Ì‡ ğ‘ ğ‘Ì‡ = ğ‘
ğ‘, ğ‘Ì‡ are the so-called â€œlinearizingâ€ coordinates
closed-loop equations (in the joint space)

Ì‡ Ì‡
ğ‘€KG âˆ— ğ‘€ğ‘Ìˆ + ğ‘ + ğ‘” = ğ‘€ğ½KGğ‘ + ğ‘ + ğ‘” âˆ’ ğ‘€ğ½KGğ½ğ‘
purely
kinematic
equations
(but still nonlinear and coupled!!)

ğ‘Ìˆ = ğ½KG ğ‘ ğ‘ âˆ’ ğ½KG ğ‘ ğ½Ì‡ ğ‘ ğ‘Ì‡

Robotics 2

8

Physical interpretation
ğ‘§

ğ‘ 3, ğ‘¢ 3

ğ‘§

ğ¹

ğ‘ğ‘§

ğ‘Ìˆ

ğ‘¢ = ğ›¼ ğ‘, ğ‘Ì‡
+ğ›½ ğ‘ ğ‘

ğ‘ 2, ğ‘¢ 2
ğ‘ 1, ğ‘¢ 1

ğ‘ğ‘¥
ğ‘¦

ğ‘¦
articulated robot
ğ‘¥ inertia depends on ğ‘ and is
variable in different Cartesian directions

ğ‘ğ‘¦

ğ‘¥

(unitary) mass
same constant behavior
in all Cartesian directions

when a control force ğ¹ is applied at the end-effector
Â§ the uncontrolled robot will accelerate with ğ‘Ìˆ in a different direction
Â§ the (unitary) mass accelerates in the same direction of applied force ğ¹
Robotics 2

9

Alternative derivation
in purely Cartesian terms

the previous exact linearizing and decoupling law can be rewritten
in Cartesian terms using a control force/torque ğ¹
ğ‘¢ = ğ‘€ ğ‘ ğ½KG ğ‘ ğ‘ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ âˆ’ ğ‘€ ğ‘ ğ½KG ğ‘ ğ½Ì‡ ğ‘ ğ‘Ì‡
joint torque ğ‘¢ is moved to the Cartesian space as ğ¹ = ğ½K9 (ğ‘)ğ‘¢ (for ğ‘š = ğ‘›)

ğ¹ = ğ½K9 ğ‘€ğ½KG ğ‘
Ì‡ Ì‡
+ ğ½K9 ğ‘ âˆ’ ğ½K9 ğ‘€ğ½KG ğ½ğ‘
+ ğ½K9 ğ‘”
= ğ‘€I ğ‘ + ğ‘I + ğ‘”I
this is the feedback linearization law
applied to the Cartesian dynamic
model of the robot
Robotics 2

Cartesian inertia [= ğ‘€I ğ‘ ]
Cartesian Coriolis/centrifugal terms
Cartesian gravity

ğ‘€I ğ‘ ğ‘Ìˆ + ğ‘I ğ‘, ğ‘Ì‡ + ğ‘”I ğ‘ = ğ¹
ğ‘Ìˆ = ğ‘
10

Remarks
n

-1

the design of a Cartesian trajectory tracking control is completed
by stabilizing the tracking error in the ğ‘š independent chains of
double integrators, i.e., by setting

ğ‘h = ğ‘Ìˆ5h + ğ¾8h ğ‘Ì‡5h âˆ’ ğ‘Ì‡h + ğ¾7h ğ‘5h âˆ’ ğ‘h
n

n

scalars

ğ¾ğ‘ƒğ‘– > 0, ğ¾ğ·ğ‘– > 0
ğ‘– = 1, â€¦ , ğ‘š

in redundant (ğ‘š < ğ‘›) robots: replacing ğ½KG with ğ½# in the control
law, we obtain input-output decoupling and linearization, but not
exact linearization of the whole state dynamics
n there is an remaining internal dynamics of dimension ğ‘› âˆ’ ğ‘š left
the Cartesian pose/velocity can either be directly measured by
external sensors (cameras) or computed through the direct and
differential kinematics of the robot arm

Robotics 2

11

Remarks
n

n

-2

the transient behavior of the Cartesian error along a desired
trajectory is exponentially stable (with arbitrary eigenvalues
assigned by choosing the diagonal gains of ğ¾ğ‘ƒ, ğ¾8 )
when applied to the case ğ‘ğ‘‘ = constant (regulation task), the
control law becomes
Ì‡ ğ‘Ì‡
ğ‘¢ = ğ‘€ ğ‘ ğ½KG ğ‘ ğ¾7 ğ‘’7 âˆ’ ğ¾8 ğ½ ğ‘ ğ‘Ì‡ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ âˆ’ ğ‘€(ğ‘)ğ½KG (ğ‘)ğ½(ğ‘)

which is computationally more expensive than a control law
designed directly for regulation, such as the previous laws (*)
or (**), but keeps the additional property of obtaining an
exponentially stable transient error

Robotics 2

12

Conclusion
n

most of the control laws presented in the joint space
(i.e., driven by a joint error) can be translated with
relative ease to the Cartesian space, e.g.
n
n
n
n

n

the main issues are related to
n

n

Robotics 2

regulation with constant gravity compensation
adaptive regulation
robust control for trajectory tracking
adaptive control for trajectory tracking
presence of kinematic singularities, both for the Jacobian
transpose or the Jacobian inverse control laws, needs some
suitable singularity robustness modifications
presence of kinematic redundancy (ğ‘š < ğ‘›) needs the use of
an additional stabilizing null-space torque for the extra ğ‘› âˆ’ ğ‘š
generalized coordinates (locally, ğ‘› âˆ’ ğ‘š joint variables)
13

