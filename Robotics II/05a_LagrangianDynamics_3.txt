Robotics 2

Dynamic model of robots:
Analysis, properties, extensions, uses
Prof. Alessandro De Luca

Analysis of inertial couplings
n

Cartesian robot

ğ‘€=

ğ‘š$$
0

0
ğ‘š&&

n

Cartesian â€œskewâ€ robot

ğ‘š$$
ğ‘€= ğ‘š
$&

ğ‘š$&
ğ‘š&&

n

PR robot

ğ‘š$$
ğ‘€=
ğ‘š$& (ğ‘& )

ğ‘š$& (ğ‘& )
ğ‘š&&

n

2R robot

ğ‘€=

ğ‘š$$ (ğ‘& )
ğ‘š$& (ğ‘& )

ğ‘š$& (ğ‘& )
ğ‘š&&

n

3R articulated robot
(under simplifying
assumptions on the CoMs)

Robotics 2

ğ‘š$$ (ğ‘& , ğ‘+ )
0
ğ‘€=
0

0
ğ‘š&& (ğ‘+ )
ğ‘š&+ (ğ‘+ )

0
ğ‘š&+ (ğ‘+ )
ğ‘š++
2

Analysis of gravity term
n

absence of gravity
n
n

n

static balancing
n

n

constant ğ‘ˆ- (motion on horizontal plane)
applications in remote space
distribution of masses (including motors)

ğ‘” ğ‘ â‰ˆ0

mechanical compensation
n
n

Robotics 2

articulated system of springs
closed kinematic chains

3

Bounds on dynamic terms
n

for an open-chain (serial) manipulator, there always exist
positive real constants ğ‘˜0 to ğ‘˜7 such that, for any value of
ğ‘ and ğ‘Ì‡
ğ‘˜3 â‰¤ ğ‘€ ğ‘ â‰¤ ğ‘˜$ + ğ‘˜& ğ‘ + ğ‘˜+ ğ‘ &
inertia matrix
ğ‘† ğ‘, ğ‘Ì‡
ğ‘” ğ‘

n

â‰¤ ğ‘˜7 + ğ‘˜8 ğ‘

ğ‘Ì‡

factorization matrix of
Coriolis/centrifugal terms

â‰¤ ğ‘˜9 + ğ‘˜: ğ‘

gravity vector

if the robot has only revolute joints, these simplify to
ğ‘˜3 â‰¤ ğ‘€ ğ‘

â‰¤ ğ‘˜$

ğ‘† ğ‘, ğ‘Ì‡

â‰¤ ğ‘˜7 ğ‘Ì‡

ğ‘” ğ‘

â‰¤ ğ‘˜9

(the same holds true with bounds ğ‘;,<;= â‰¤ ğ‘; â‰¤ ğ‘;,<>? on prismatic joints)
NOTE: norms are either for vectors or for matrices (induced norms)
Robotics 2

4

Robots with closed kinematic chains

Comau Smart NJ130
Robotics 2

-1

MIT Direct Drive Mark II and Mark III
5

Robots with closed kinematic chains

MIT Direct Drive Mark IV
(planar five-bar linkage)
Robotics 2

-2

UMinnesota Direct Drive Arm
(spatial five-bar linkage)
6

Robot with parallelogram structure
(planar) kinematics and dynamics

3

ğ‘™C7

ğ‘¦

ğ‘™C+

1

ğ‘™C$
2

ğ‘™8

4

ğ‘™C&

center of mass:
arbitrary ğ‘™C;

ğ‘& âˆ’ ğœ‹
5

E-E

parallelogram:

ğ‘™$ = ğ‘™+
ğ‘™& = ğ‘™7

ğ‘&
ğ‘$

ğ‘GG

ğ‘¥

direct kinematics
ğ‘™8 cos ğ‘& âˆ’ ğœ‹
ğ‘™$ ğ‘$
=
+
ğ‘™$ ğ‘ $
ğ‘™8 sin ğ‘& âˆ’ ğœ‹

ğ‘™8 ğ‘&
ğ‘™$ ğ‘$
=
âˆ’
ğ‘™$ ğ‘ $
ğ‘™8 ğ‘ &

position of center of masses
ğ‘C$

ğ‘™C$ ğ‘$
=
ğ‘™C$ ğ‘ $

Robotics 2

ğ‘C&

ğ‘™C& ğ‘&
=
ğ‘™C& ğ‘ &

ğ‘C+

ğ‘™C+ ğ‘$
ğ‘™& ğ‘&
=
+
ğ‘™& ğ‘ &
ğ‘™C+ ğ‘ $

ğ‘C7

ğ‘™$ ğ‘$
ğ‘™C7 ğ‘&
=
âˆ’
ğ‘™$ ğ‘ $
ğ‘™C7 ğ‘ &
7

Kinetic energy
linear/angular velocities
âˆ’ğ‘™C$ ğ‘ $
âˆ’ğ‘™C+ ğ‘ $
âˆ’ğ‘™& ğ‘ &
ğ‘£C$ =
ğ‘Ì‡ $ ğ‘£C+ =
ğ‘Ì‡ $ +
ğ‘Ì‡ &
ğ‘™C$ ğ‘$
ğ‘™C+ ğ‘$
ğ‘™& ğ‘&
âˆ’ğ‘™C& ğ‘ &
âˆ’ğ‘™$ ğ‘ $
ğ‘™ ğ‘ 
ğ‘£C& =
ğ‘Ì‡ & ğ‘£C7 =
ğ‘Ì‡ $ + C7 & ğ‘Ì‡ &
ğ‘™C& ğ‘&
ğ‘™$ ğ‘$
âˆ’ğ‘™C7 ğ‘&

ğœ”$ = ğœ”+ = ğ‘Ì‡ $
ğœ”& = ğœ”7 = ğ‘Ì‡ &

Note: a (planar) 2D notation is used here!

ğ‘‡;

$

$

& &
ğ‘‡$ = & ğ‘š$ ğ‘™C$
ğ‘Ì‡ $ + & ğ¼C$,SS ğ‘Ì‡ $&

ğ‘‡& =

$
& &
ğ‘š& ğ‘™C&
ğ‘Ì‡ &
&

$

$

&

&

+

$
ğ¼C&,SS ğ‘Ì‡ &&
&

& &
ğ‘‡+ = ğ‘š+ ğ‘™&& ğ‘Ì‡ && + ğ‘™C+
ğ‘Ì‡ $ + 2ğ‘™& ğ‘™C+ ğ‘&U$ ğ‘Ì‡ $ ğ‘Ì‡ & + ğ¼C+,SS ğ‘Ì‡ $&

ğ‘‡7 =
Robotics 2

$

ğ‘š7 ğ‘™$& ğ‘Ì‡ $&
&

+

& &
ğ‘™C7
ğ‘Ì‡ &

$

âˆ’ 2ğ‘™$ ğ‘™C7 ğ‘&U$ ğ‘Ì‡ $ ğ‘Ì‡ & + ğ¼C7,SS ğ‘Ì‡ &&
&

8

Robot inertia matrix
7

1 Y
ğ‘‡ = V ğ‘‡; = ğ‘Ì‡ ğ‘€ ğ‘ ğ‘Ì‡
2
;W$

&
&
ğ¼C$,SS + ğ‘š$ ğ‘™C$
+ ğ¼C+,SS + ğ‘š+ ğ‘™C+
+ ğ‘š7 ğ‘™$&
ğ‘€ ğ‘ =
ğ‘š+ ğ‘™& ğ‘™C+ âˆ’ ğ‘š7 ğ‘™$ ğ‘™C7 ğ‘&U$

structural condition
in mechanical design

symm
&
&
ğ¼C&,SS + ğ‘š& ğ‘™C&
+ ğ¼C7,SS + ğ‘š7 ğ‘™C7
+ ğ‘š+ ğ‘™&&

ğ‘š+ ğ‘™& ğ‘™C+ = ğ‘š7 ğ‘™$ ğ‘™C7

(*)

ğ‘€(ğ‘) diagonal and constant â‡’ centrifugal and Coriolis terms â‰¡ 0
mechanically DECOUPLED and LINEAR
dynamic model (up to the gravity term ğ‘”(ğ‘))

ğ‘€$$
0

0
ğ‘€&&

ğ‘¢$
ğ‘Ìˆ $
= ğ‘¢
ğ‘Ìˆ &
&

big advantage for the design of a motion control law!
Robotics 2

9

Potential energy and gravity terms
ğ‘ˆ;

from the ğ‘¦-components of vectors ğ‘C;

ğ‘ˆ$ = ğ‘š$ ğ‘”3 ğ‘™C$ ğ‘ $

ğ‘ˆ& = ğ‘š& ğ‘”3 ğ‘™C& ğ‘ &

ğ‘ˆ+ = ğ‘š+ ğ‘”3 ğ‘™& ğ‘ & + ğ‘™C+ ğ‘ $

ğ‘ˆ7 = ğ‘š7 ğ‘”3 ğ‘™$ ğ‘ $ âˆ’ ğ‘™C7 ğ‘ &
7

ğ‘ˆ = V ğ‘ˆ;
;W$

ğœ•ğ‘ˆ
ğ‘” ğ‘ =
ğœ•ğ‘
in addition,
when (*) holds

Y

=

ğ‘”3 ğ‘š$ ğ‘™C$ + ğ‘š+ ğ‘™C+ + ğ‘š7 ğ‘™$ ğ‘$
ğ‘” ğ‘
= $ $
ğ‘”3 ğ‘š& ğ‘™C& + ğ‘š+ ğ‘™& âˆ’ ğ‘š7 ğ‘™C7 ğ‘&
ğ‘”& ğ‘&

ğ‘š$$ ğ‘Ìˆ $ + ğ‘”$ ğ‘$ = ğ‘¢$
ğ‘š&& ğ‘Ìˆ & + ğ‘”& ğ‘& = ğ‘¢&

gravity
components
are always
â€œdecoupledâ€
ğ‘¢; are

(non-conservative) torques
performing work on ğ‘;

further structural conditions in the mechanical design lead to ğ‘”(ğ‘) â‰¡ 0!!
Robotics 2

10

Adding dynamic terms ...
1) dissipative phenomena due to friction at the joints/transmissions
n viscous, Coulomb, stiction, Stribeck, LuGre (dynamic)...
n local effects at the joints
n difficult to model in general, except for:

ğ‘¢a,; = âˆ’ğ¹a,; ğ‘Ì‡ ;

ğ‘¢c,; = âˆ’ğ¹c,; sgn ğ‘Ì‡ ;
ğ‘­ğ‘½ ğ’’Ì‡

ğ‘­ğ‘ª ğ’”ğ’ˆğ’(ğ’’)
Ì‡
ğ‘­ğ’”ğ’•ğ’Šğ’„ğ’•ğ’Šğ’ğ’

Robotics 2

11

Adding dynamic terms ...
2) inclusion of electrical actuators (as additional rigid bodies)
n motor ğ‘– mounted on link ğ‘– âˆ’ 1 (or before) , with very few exceptions
n often with its spinning axis aligned with joint axis ğ‘–
n (balanced) mass of motor included in total mass of carrying link
n (rotor) inertia has to be added to robot kinetic energy
n transmissions with reduction gears (often, large reduction ratios)
n in some cases, multiple motors cooperate in moving multiple links:
use a transmission coupling matrix ğ›¤ (with off-diagonal elements)
Unimation PUMA family

ğ‘šğ‘œğ‘¡ğ‘œğ‘Ÿ 3

ğ‘—ğ‘œğ‘–ğ‘›ğ‘¡ 3

ğ‘šğ‘œğ‘¡ğ‘œğ‘Ÿ 2
ğ‘—ğ‘œğ‘–ğ‘›ğ‘¡ 2

Robotics 2

Mitsubishi RV-3S

12

Placement of motors along the chain
ğœƒÌ‡<y

ğœƒÌ‡<$
motor 1
rotor 1
frame
link 1

RFW

rotor N
frame
motor N

joint 2
link 2

RFN-1

(world frame)

link N

RFN
RF0

RF1
link N - 1

link 0
(base)

motor 2

joint N

joint1

ğœƒÌ‡<; = ğ‘›z; ğœƒÌ‡;
ğœ; = ğ‘›z; ğœ<;

ğœƒÌ‡<&
Robotics 2

13

Resulting dynamic model
n

simplifying assumption: in the rotational part of the kinetic
energy, only the â€œspinningâ€ rotor velocity is considered
ğ‘‡<;

n

1
1
1
&
& &
Ì‡
= ğ¼<; ğœƒ<; = ğ¼<; ğ‘›z; ğ‘Ì‡ ; = ğµ<; ğ‘Ì‡ ;&
2
2
2

y

ğ‘‡< = V ğ‘‡<;
;W$

1 Y
= ğ‘Ì‡ ğµ< ğ‘Ì‡
2
diagonal, > 0

including all added terms, the robot dynamics becomes
moved to
the left ...

ğ‘€ ğ‘ + ğµ< ğ‘Ìˆ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ + ğ¹a ğ‘Ì‡ + ğ¹c sgn ğ‘Ì‡ = ğœ
constant
n

diagonal

ğ¹ğ‘‰ > 0, ğ¹c > 0

does NOT
contribute to ğ‘

diagonal

motor torques

(after
reduction gears)

scaling by the reduction gears, looking from the motor side
ğ‘š;; (ğ‘)
ğ¼< + diag
&
ğ‘›z;

Robotics 2

1
Ìˆ
ğœƒ< + diag
ğ‘›z;

y

â€šâ€¢ (ğ‘)ğ‘Ìˆ â€¢ + ğ‘“ ğ‘, ğ‘Ì‡
Vğ‘€
â€¢W$

except the terms ğ‘šâ€¢â€¢

= ğœ<

motor torques

(before
reduction gears)
14

Including joint elasticity
n

in industrial robots, use of motion transmissions based on
n
n
n

n

introduces flexibility between actuating motors (input) and driven
links (output)
in research robots compliance in transmissions is introduced on
purpose for safety (human collaboration) and/or energy efficiency
n
n
n

n
n

belts
harmonic drives
long shafts

actuator relocation by means of (compliant) cables and pulleys
harmonic drives and lightweight (but rigid) link design
redundant (macro-mini or parallel) actuation, with elastic couplings

in both cases, flexibility is modeled as concentrated at the joints
in most cases, assuming small joint deformation (elastic domain)

Robotics 2

15

Robots with joint elasticity

DLR LWR-III

Dexter

with harmonic drives

with cable transmissions

elastic
motor spring load/link
(stiffness K)

Quanser Flexible Joint

(1-dof linear, educational)

Robotics 2

video

Stanford DECMMA

with micro-macro actuation

16

Dynamic model
of robots with elastic joints
n

introduce 2ğ‘ generalized coordinates
n
n

n

1 Y
add motor kinetic energy ğ‘‡ğ‘š to that of the links ğ‘‡Ë† = ğ‘Ì‡ ğ‘€(ğ‘)ğ‘Ì‡
2
y
ğ‘‡<;

n

ğ‘ = ğ‘ link positions
ğœƒ = ğ‘ motor positions (after reduction, ğœƒ; = ğœƒ<; /ğ‘›z; )

1
1
1
&
& Ì‡&
Ì‡
= ğ¼<; ğœƒ<; = ğ¼<; ğ‘›z; ğœƒ; = ğµ<; ğœƒÌ‡;&
2
2
2

;W$

diagonal, > 0

add elastic potential energy ğ‘ˆğ‘’ to that due to gravity ğ‘ˆ- (ğ‘)
n

ğ¾ = matrix of joint stiffness (diagonal, > 0)

1
ğœƒ<;
ğ‘ˆâ€°; = ğ¾; ğ‘; âˆ’
2
ğ‘›z;
n

ğ‘‡< = V ğ‘‡<;

1 Y
= ğœƒÌ‡ ğµ< ğœƒÌ‡
2

&

1
= ğ¾; ğ‘; âˆ’ ğœƒ;
2

y

&

1
ğ‘ˆâ€° = V ğ‘ˆâ€°; = ğ‘ âˆ’ ğœƒ Y ğ¾ ğ‘ âˆ’ ğœƒ
2
;W$

apply Euler-Lagrange equations w.r.t. (ğ‘, ğœƒ)

2ğ‘ 2nd-order
differential
equations
Robotics 2

ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ + ğ¾ ğ‘ âˆ’ ğœƒ = 0
ğµ< ğœƒÌˆ + ğ¾ ğœƒ âˆ’ ğ‘ = ğœ

no external torques
performing work on ğ‘

17

Use of the dynamic model
inverse dynamics

n

given a desired trajectory ğ‘Å  (ğ‘¡)
n
twice differentiable (âˆƒ ğ‘Ìˆ Å  (ğ‘¡))
n

possibly obtained from a task/Cartesian trajectory ğ‘ŸÅ  (ğ‘¡), by
(differential) kinematic inversion

the input torque needed to execute this motion (in free space) is

ğœÅ  = ğ‘€ ğ‘Å  + ğµ< ğ‘Ìˆ Å  + ğ‘ ğ‘Å  , ğ‘Ì‡ Å  + ğ‘” ğ‘Å  + ğ¹a ğ‘Ì‡ Å  + ğ¹c sgn ğ‘Ì‡ Å 
n
n

useful also for control (e.g., nominal feedforward)
however, this way of performing the algebraic computation (âˆ€ğ‘¡) is
not efficient when using the above Lagrangian approach
n symbolic terms grow much longer, quite rapidly for larger ğ‘
n

Robotics 2

in real time, numerical computation is based on Newton-Euler method
18

State equations
direct dynamics

Lagrangian
dynamic model

ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ = ğ‘¢

ğ‘ differential
2nd order
equations

ğ‘¥$
ğ‘
&y
defining the vector of state variables as ğ‘¥ =
=
âˆˆ
â„
ğ‘¥&
ğ‘Ì‡
state equations

ğ‘¥&
ğ‘¥Ì‡ $
ğ‘¥Ì‡ =
=
âˆ’ğ‘€ U$ (ğ‘¥$ ) ğ‘ ğ‘¥$ , ğ‘¥& + ğ‘”(ğ‘¥$ )
ğ‘¥Ì‡ &

2ğ‘ differential

= ğ‘“(ğ‘¥) + ğº(ğ‘¥)ğ‘¢
2ğ‘ Ã— 1

Robotics 2

1st order
equations

2ğ‘ Ã— ğ‘

ğ‘
another choice... ğ‘¥â€¢ = ğ‘€(ğ‘)ğ‘Ì‡

0
+
ğ‘¢
ğ‘€ U$ (ğ‘¥$ )

generalized
momentum

ğ‘¥â€¢Ì‡ = ... (do it as exercise)
19

Dynamic simulation
Simulink
block
scheme
input torque
command
(open-loop
or in
feedback)

ğ‘(ğ‘, ğ‘)
Ì‡

ğ‘¢

+

here, a generic 2-dof robot

ğ‘, ğ‘Ì‡

ğ‘Ì‡ $ (0)

_
_

ğ‘”(ğ‘)

ğ‘$ (0)

ğ‘Ìˆ $

ğ‘Ì‡ $

ğ‘Ìˆ &

ğ‘Ì‡ &

ğ‘$

ğ‘€U$ (ğ‘)

ğ‘

ğ‘

ğ‘Ì‡ & (0)

ğ‘&
ğ‘& (0)
including â€œinv(M)â€

Â§ initialization (dynamic coefficients and initial state)
Â§ calls to (user-defined) Matlab functions for the evaluation of model terms
Â§ choice of a numerical integration method (and of its parameters)
Robotics 2

20

Approximate linearization
n

we can derive a linear dynamic model of the robot, which is valid
locally around a given operative condition
n useful for analysis, design, and gain tuning of linear (or, the linear
part of) control laws
n approximation by Taylor series expansion, up to the first order
n linearization around a (constant) equilibrium state or along a
(nominal, time-varying) equilibrium trajectory
n usually, we work with (nonlinear) state equations; for mechanical
systems, it is more convenient to directly use the 2nd order model
n

same result, but easier derivation

equilibrium state (ğ‘, ğ‘)
Ì‡ = (ğ‘â€° , 0) [ ğ‘Ìˆ = 0 ]

ğ‘” ğ‘â€° = ğ‘¢â€°

equilibrium trajectory (ğ‘, ğ‘)
Ì‡ = (ğ‘Å  (ğ‘¡), ğ‘Ì‡ Å  (ğ‘¡)) [ ğ‘Ìˆ = ğ‘Ìˆ Å  (ğ‘¡) ]

ğ‘€ ğ‘Å  ğ‘Ìˆ Å  + ğ‘ ğ‘Å  , ğ‘Ì‡ Å  + ğ‘” ğ‘Å  = ğ‘¢Å 
Robotics 2

21

Linearization at an equilibrium state
n

variations around an equilibrium state
ğ‘ = ğ‘â€° + Î”ğ‘

n

ğ‘Ì‡ = ğ‘Ì‡ â€° + Î”ğ‘Ì‡ = Î”ğ‘Ì‡

ğ‘Ìˆ = ğ‘Ìˆ â€° + âˆ†ğ‘Ìˆ = âˆ†ğ‘Ìˆ ğ‘¢ = ğ‘¢â€° + Î”ğ‘¢

keeping into account the quadratic dependence of c terms
on velocity (thus, neglected around the zero velocity)
ğ‘€ ğ‘â€° âˆ†ğ‘Ìˆ + ğ‘” ğ‘â€° +

ğœ•ğ‘”
â€“
âˆ†ğ‘ + o âˆ†ğ‘ , âˆ†ğ‘Ì‡
ğœ•ğ‘ Ë†WË†
â€”

ğº(ğ‘â€° )

= ğ‘¢â€° + âˆ†ğ‘¢

infinitesimal terms
of second or higher order

âˆ†ğ‘
n in state-space format, with âˆ†ğ‘¥ =
âˆ†ğ‘Ì‡
0
ğ¼
0
Ì‡
âˆ†ğ‘¥ =
âˆ†ğ‘¥ +
âˆ†ğ‘¢ = ğ´ âˆ†ğ‘¥ + ğµ âˆ†ğ‘¢
U$
U$
âˆ’ğ‘€ ğ‘â€° ğº(ğ‘â€° ) 0
ğ‘€ (ğ‘â€° )
Robotics 2

22

Linearization along a trajectory
n

variations around an equilibrium trajectory
ğ‘ = ğ‘Å  + Î”ğ‘

n

ğ‘Ì‡ = ğ‘Ì‡ Å  + Î”ğ‘Ì‡

ğ‘Ìˆ = ğ‘Ìˆ Å  + âˆ†ğ‘Ìˆ

ğ‘¢ = ğ‘¢Å  + Î”ğ‘¢

developing to 1st order the terms in the dynamic model ...

Ì‡ + ğ‘” ğ‘Å  + âˆ†ğ‘ = ğ‘¢Å  + âˆ†ğ‘¢
ğ‘€(ğ‘Å  + âˆ†ğ‘) ğ‘Ìˆ Å  + âˆ†ğ‘Ìˆ + ğ‘(ğ‘Å  + âˆ†ğ‘, ğ‘Ì‡ Å  + âˆ†ğ‘)
y

ğ‘€ ğ‘Å  + âˆ†ğ‘ â‰… ğ‘€ ğ‘Å 

ğœ•ğ‘€;
+V
â€“
ğ‘’;Y âˆ†ğ‘
ğœ•ğ‘ Ë†WË†
;W$

ğ‘” ğ‘Å  + âˆ†ğ‘ â‰… ğ‘” ğ‘Å  + ğº(ğ‘Å  )âˆ†ğ‘

Å¡

ğ¶$ (ğ‘Å  , ğ‘Ì‡ Å  )

ğ‘ ğ‘Å  + âˆ†ğ‘, ğ‘Ì‡ Å  + âˆ†ğ‘Ì‡ â‰… ğ‘ ğ‘Å  , ğ‘Ì‡ Å  +

ğœ•ğ‘
ğœ•ğ‘
â€“
âˆ†ğ‘ + â€“
âˆ†ğ‘Ì‡
ğœ•ğ‘ Ë†WË†Å¡
ğœ• ğ‘Ì‡ Ë†WË†Å¡
Ë†W
Ì‡ Ë†Ì‡ Å¡

Robotics 2

ğ‘–-th row of the
identity matrix

Ë†W
Ì‡ Ë†Ì‡ Å¡

ğ¶& (ğ‘Å  , ğ‘Ì‡ Å  )

23

Linearization along a trajectory
n

(cont)

after simplifications â€¦

ğ‘€(ğ‘Å  )âˆ†ğ‘Ìˆ + ğ¶& (ğ‘Å  , ğ‘Ì‡ Å  )âˆ†ğ‘Ì‡ + ğ· ğ‘Å  , ğ‘Ì‡ Å  , ğ‘Ìˆ Å  âˆ†ğ‘ = âˆ†ğ‘¢
with

y

ğ· ğ‘Å  , ğ‘Ì‡ Å  , ğ‘Ìˆ Å  = ğº ğ‘Å  + ğ¶$ ğ‘Å  , ğ‘Ì‡ Å 
n

in state-space format

âˆ†ğ‘¥Ì‡ =

ğœ•ğ‘€;
+V
â€“
ğ‘Ìˆ Å  ğ‘’;Y
ğœ•ğ‘ Ë†WË†
;W$

Å¡

0
ğ¼
âˆ’ğ‘€ U$ ğ‘Å  ğ· ğ‘Å  , ğ‘Ì‡ Å  , ğ‘Ìˆ Å 
âˆ’ğ‘€ U$ ğ‘Å  ğ¶& ğ‘Å  , ğ‘Ì‡ Å 
0
+
âˆ†ğ‘¢ = ğ´(ğ‘¡) âˆ†ğ‘¥ + ğµ(ğ‘¡) âˆ†ğ‘¢
ğ‘€ U$ (ğ‘Å  )

âˆ†ğ‘¥

a linear, but time-varying system!!
Robotics 2

24

Coordinate transformation
ğ‘ âˆˆ â„y ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘ ğ‘, ğ‘Ì‡ + ğ‘” ğ‘ = ğ‘€ ğ‘ ğ‘Ìˆ + ğ‘› ğ‘, ğ‘Ì‡ = ğ‘¢Ë†

1

if we wish/need to use a new set of generalized coordinates ğ‘

ğ‘ âˆˆ â„y

ğ‘ = ğ‘“(ğ‘)

ğ‘ = ğ‘“ U$ (ğ‘)

ğœ•ğ‘“
ğ‘Ì‡ =
ğ‘Ì‡ = ğ½(ğ‘)ğ‘Ì‡
ğœ•ğ‘

ğ‘Ì‡ = ğ½U$ (ğ‘)ğ‘Ì‡ ğ‘¢Ë† = ğ½Y (ğ‘)ğ‘¢Å¾

Ì‡ ğ‘Ì‡
ğ‘Ìˆ = ğ½ ğ‘ ğ‘Ìˆ + ğ½(ğ‘)

U$ (ğ‘)ğ‘Ì‡
Ì‡
ğ‘Ìˆ = ğ½U$ (ğ‘) ğ‘Ìˆ âˆ’ ğ½(ğ‘)ğ½

1

U$ (ğ‘)ğ‘Ì‡ + ğ‘› ğ‘, ğ‘Ì‡ = ğ½ Y (ğ‘)ğ‘¢
Ì‡
ğ‘€ ğ‘ ğ½U$ ğ‘ ğ‘Ìˆ âˆ’ ğ‘€(ğ‘)ğ½U$ (ğ‘)ğ½(ğ‘)ğ½
Å¾

ğ½UY (ğ‘) Å¸
Robotics 2

pre-multiplying the whole equation...
25

Robot dynamic model

after coordinate transformation
U$ (ğ‘)ğ‘Ì‡ = ğ‘¢
Ì‡
ğ½UY ğ‘ ğ‘€ ğ‘ ğ½U$ ğ‘ ğ‘Ìˆ + ğ½UY ğ‘ ğ‘› ğ‘, ğ‘Ì‡ âˆ’ ğ‘€(ğ‘)ğ½U$ (ğ‘)ğ½(ğ‘)ğ½
Å¾

ğ‘â†’ğ‘

for actual computation,
these inner substitutions
are not necessary

(ğ‘, ğ‘)
Ì‡ â†’ (ğ‘, ğ‘)Ì‡

ğ‘€Å¾ ğ‘ ğ‘Ìˆ + ğ‘Å¾ ğ‘, ğ‘Ì‡ + ğ‘”Å¾ ğ‘ = ğ‘¢Å¾
ğ‘€Å¾ =
ğ‘Å¾ =

symmetric,

ğ½UY ğ‘€ğ½U$ positive definite

(out of singularities)

ğ½UY

ğ‘âˆ’

ğ‘€ğ½U$

ğ‘”Å¾ = ğ½UY ğ‘”

ğ½ Ì‡ ğ½U$ ğ‘Ì‡ = ğ½UY ğ‘ âˆ’ ğ‘€Å¾ ğ½ Ì‡ ğ½U$ ğ‘Ì‡

ğ‘Å¾ (ğ‘, ğ‘)Ì‡ = ğ‘†Å¾ (ğ‘, ğ‘)Ì‡ ğ‘Ì‡

non-conservative
generalized forces
performing work on ğ‘

ğ‘€Ì‡ Å¾ âˆ’ 2ğ‘†Å¾

quadratic
dependence on ğ‘Ì‡

skew-symmetric

when ğ‘ = E-E pose, this is the robot dynamic model in Cartesian coordinates
Q: What if the robot is redundant with respect to the Cartesian task?
Robotics 2

26

Dynamic scaling of trajectories
uniform time scaling of motion

n

given a smooth original trajectory ğ‘Å  (ğ‘¡) of motion for ğ‘¡ âˆˆ [0, ğ‘‡]
n suppose to rescale time as ğ‘¡ â†’ ğ‘Ÿ(ğ‘¡) (a strictly increasing function of ğ‘¡ )
n

in the new time scale, the scaled trajectory ğ‘Â¡ (ğ‘Ÿ) satisfies

ğ‘Å  ğ‘¡ = ğ‘Â¡ ğ‘Ÿ(ğ‘¡)
same path executed
(at different instants of time)

ğ‘‘ğ‘Å  ğ‘‘ğ‘Â¡ ğ‘‘ğ‘Ÿ
ğ‘Ì‡ Å  ğ‘¡ =
=
= ğ‘Â¡Â£ ğ‘ŸÌ‡
ğ‘‘ğ‘¡
ğ‘‘ğ‘Ÿ ğ‘‘ğ‘¡

ğ‘‘ ğ‘Ì‡ Å 
ğ‘‘ğ‘Â¡Â£ ğ‘‘ğ‘Ÿ
ğ‘Ìˆ Å  ğ‘¡ =
=
ğ‘ŸÌ‡ + ğ‘Â¡Â£ ğ‘ŸÌˆ = ğ‘Â¡Â£Â£ ğ‘ŸÌ‡ & + ğ‘Â¡Â£ ğ‘ŸÌˆ
ğ‘‘ğ‘¡
ğ‘‘ğ‘Ÿ ğ‘‘ğ‘¡
n

uniform scaling of the trajectory occurs when ğ‘Ÿ ğ‘¡ = ğ‘˜ğ‘¡

ğ‘Ì‡ Å  ğ‘¡ = ğ‘˜ğ‘Â¡Â£ (ğ‘˜ğ‘¡)

ğ‘Ìˆ Å  ğ‘¡ = ğ‘˜ & ğ‘Â¡Â£Â£ (ğ‘˜ğ‘¡)

Q: what is the new input torque needed to execute the scaled trajectory?
(suppose dissipative terms can be neglected)
Robotics 2

27

Dynamic scaling of trajectories
inverse dynamics under uniform time scaling

n

the new torque could be recomputed through the inverse dynamics, for
every ğ‘Ÿ = ğ‘˜ğ‘¡ âˆˆ 0, ğ‘‡ Â£ = [0, ğ‘˜ğ‘‡] along the scaled trajectory, as

ğœÂ¡ ğ‘˜ğ‘¡ = ğ‘€ ğ‘Â¡ ğ‘Â¡Â£Â£ + ğ‘ ğ‘Â¡ , ğ‘Â¡Â£ + ğ‘”(ğ‘Â¡ )
n

however, being the dynamic model linear in the acceleration and
quadratic in the velocity, it is

ğœÅ  ğ‘¡ = ğ‘€ ğ‘Å  ğ‘Ìˆ Å  + ğ‘ ğ‘Å  , ğ‘Ì‡ Å  + ğ‘” ğ‘Å  = ğ‘€ ğ‘Â¡ ğ‘˜ & ğ‘Â¡Â£Â£ + ğ‘ ğ‘Â¡ , ğ‘˜ğ‘Â¡Â£ + ğ‘”(ğ‘Â¡ )
= ğ‘˜ & ğ‘€ ğ‘Â¡ ğ‘Â¡Â£Â£ + ğ‘ ğ‘Â¡ , ğ‘Â¡Â£
n

+ ğ‘” ğ‘Â¡ = ğ‘˜ & ğœÂ¡ ğ‘˜ğ‘¡ âˆ’ ğ‘” ğ‘Â¡

+ ğ‘” ğ‘Â¡

thus, saving separately the total torque ğœÅ  (ğ‘¡) and gravity torque ğ‘”Å  (ğ‘¡)
in the inverse dynamics computation along the original trajectory, the
new input torque is obtained directly as

1
ğœÂ¡ ğ‘˜ğ‘¡ = & ğœÅ  ğ‘¡ âˆ’ ğ‘” ğ‘Å  (ğ‘¡)
ğ‘˜
Robotics 2

+ ğ‘” ğ‘Å  (ğ‘¡)

ğ‘˜ > 1: slow down
â‡’ reduce torque
ğ‘˜ < 1: speed up
â‡’ increase torque

gravity term (only position-dependent): does NOT scale!

28

Dynamic scaling of trajectories
numerical example

n

n

rest-to-rest motion with cubic polynomials for planar 2R robot under gravity
(from downward equilibrium to horizontal link 1 & upward vertical link 2)
original trajectory lasts ğ‘‡ = 0.5 s (but maybe violates the torque limit at joint 1)
only joint 1 torque is shown
torque only due
to non-zero initial
acceleration
total torque

gravity torque
component

at equilibrium
= zero gravity
torque

for both joints

Robotics 2

29

Dynamic scaling of trajectories
numerical example

original
total
torque

gravity torque
to sustain the link
at steady state

n

scaling with ğ‘˜ = 2 (slower) â†’ ğ‘‡ Â£ = 1 s

ğœÅ  0.1 âˆ’ ğ‘” ğ‘Å  0.1

= 20 Nm

*

ğ‘‡ = 0.5 s

scaled
total
torque

gravity torque
component
does not scale

ğœÂ¡ 2 Å¸ 0.1 âˆ’ ğ‘” ğ‘Â¡ 2 Å¸ 0.1

&3
&Â¨

= 5 Nm

*
*

*

0 Nm

1
4

ğ‘‡ = 0.5 s

Robotics 2

=

ğ‘‡Â£ = 1 s

ğ‘˜=2

ğ‘‡=1s

30

Optimal point-to-point robot motion
considering the dynamic model

Â§ given the initial and final robot configurations (at rest) and
actuator torque bounds, find
n the minimum-time Tmin motion
n the (global/integral) minimum-energy Emin motion
and the associated command torques needed to execute them
Â§ a complex nonlinear optimization problem solved numerically

video

Robotics 2

video

Tmin= 1.32 s, E = 306

T = 1.60 s, Emin = 6.14

31

